<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>a09</title>
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div>
        <span>전화번호 : </span>
        <input type="text" name="phone">
        <p id="pValid"></p>
    </div>

    <div>
        <span>확인 할 회원 : </span>
        <input type="text" name="member">
        <p id="memValid"></p>
    </div>

    <div class="schJava">
        <h3>자바관련 검색</h3>
        <textarea>자바(영어: Java)는 썬 마이크로시스템즈의 제임스 고슬링(James Gosling)과 다른 연구원들이 개발한 객체 지향적 프로그래밍 언어이다. 1991년 그린 프로젝트(Green Project)라는 이름으로 시작해 1995년에 발표했다. 처음에는 가전제품 내에 탑재해 동작하는 프로그램을 위해 개발되었지만 현재 웹 애플리케이션 분야에 가장 많이 사용하는 언어 중 하나이고, 안드로이드를 비롯한 모바일 기기용 소프트웨어 개발에도 널리 사용되고 있다. 현재 버전 20까지 출시했다.자바의 개발자들은 유닉스 기반의 배경을 가지고 있었기 때문에 문법적인 특성은 파스칼이 아닌 C++의 조상인 C 언어와 비슷하다.[3] 자바를 다른 컴파일언어와 구분 짓는 가장 큰 특징은 컴파일된 코드가 플랫폼 독립적이라는 점이다. 자바 컴파일러는 자바 언어로 작성된 프로그램을 바이트코드라는 특수한 바이너리 형태로 변환한다. 바이트코드를 실행하기 위해서는 JVM(자바 가상 머신, Java Virtual Machine)이라는 특수한 가상 머신이 필요한데, 이 가상 머신은 자바 바이트코드를 어느 플랫폼에서나 동일한 형태로 실행시킨다. 때문에 자바로 개발된 프로그램은 CPU나 운영 체제의 종류에 관계없이 JVM을 설치할 수 있는 시스템에서는 어디서나 실행할 수 있으며, 이 점이 웹 애플리케이션의 특성과 맞아떨어져 폭발적인 인기를 끌게 되었다.
        </textarea>
        <input type="text" name="schTxt">
        <input type="button" value="검색" class="sch">
        <p >검색 결과 : <span class="schResult"></span></p>
    </div>


    <script>
        let ph = document.querySelector("[name=phone]");
        let mem = document.querySelector("[name=member]");
        let pValid = document.querySelector("#pValid");
        let mValid = document.querySelector("#memValid");

        ph.onkeyup = function () {
            // 전화번호의 정규식 유효 패턴
            // 전화번호가 3자리 3-4자리 4자리 숫자로 구성되게 처리
            let phPattern = /^\d{3}-\d{3,4}-\d{4}/;
            // 해당 패턴에 맞게 입력하면
            if (phPattern.test(this.value)) {
                pValid.innerHTML = "유효한 전화번호입니다.";
            } else {
                pValid.innerHTML = "전화번호(nnn-nnnn-nnnn) 형식에 맞춰 입력해주세요.";
            }
        }

        // 1. test() : 일치여부에 따른 boolean 데이터 처리
        let pattern = /apple/;
        let str = "I have an apple.";
        console.log("-- test() --");
        console.log(pattern.test(str));

        if (pattern.test(str)) {
            console.log("apple O");
        } else {
            console.log("apple X");
        }

        // ex) 정규식 test 메서드 활용. 회원 이름에 himan 입력되면 등록한 회원은 있습니다 출력
        // 아니면 없습니다 출력

        mem.onkeyup = function () {
            let memPt = /himan/;
            let mvalue = mem.value;

            if (memPt.test(mvalue)) {
                mValid.innerHTML = "등록한 회원이 있습니다.";
                this.style.backgroundColor = "#fff"
            } else {
                mValid.innerHTML = "등록한 회원이 없습니다.";
                this.style.backgroundColor = "#ff4d47"
            }
        }

        // 2. exec() : 일정한 문자열을 검색하는 메서드
        // 패턴/i : 대소문자 구분없이 처리해줌
        let pattern2 = /apple/i;
        let str2 = "I have an apple, Apple is mine.";
        let result = pattern2.exec(str2);

        console.log("-- exec() --");
        console.log("결과 : " + result);

        // 3. match() : 정규식과 일치하는 문자열을 배열로 반환하는 메서드 
        // /g : 정규식 플래그로 global 전역 매치, 한개 초과할 때 내용을 모든 패턴 결과 반환
        let pattern3 = /apple/ig;
        let str3 = "I have an apple, Apple is mine.";
        let matches = str3.match(pattern3);
        console.log("-- matches() --");
        console.log(matches);
        // ex) textarea를 만들고, 위키백과 사전에 자바를 검색해서 데이터 넣고,
        // "자바" 내용이 몇 번 검색되는지 확인할 수 있는 검색 버튼 생성 및 출력

        let sch = document.querySelector(".sch");
        let schResult = document.querySelector(".schResult");
        let schTxt = document.querySelector("[name=schTxt]");
        
        sch.onclick = function() {
            let patt = new RegExp(schTxt.value, 'gi') ;
            let txtVlu = document.querySelector(".schJava textarea").value;
            let result = txtVlu.match(patt);

            schResult.innerHTML = schTxt.value +  "의 검색 결과 : "  + result.length;
        }

        // 4. search() : 정규식과 일치하는 문자열의 인덱스를 반환하는 메서드
        let pattern4 = /apple/;
        let str4 = "I have an apple, Apple is mine.";
        let sIdx = str4.search(pattern4);
        console.log("-- search() --");
        console.log("검색된 index 위치 : " + sIdx);

        // 5. replace() : 정규식과 일치하는 문자열을 대체하는 메서드
        let pattern5 = /apple/gi; // gi -> 대소문자 구분 없이 단어 검색
        let str5 = "I have an apple, Apple is mine.";
        let rplStr = str5.replace(pattern5, "orange");
        console.log("-- replace() --");
        console.log("대체 이후 데이터 : " + rplStr);

        // 6. split() : 정규식을 기준으로 문자열을 분할하여 배열로 반환하는 메서드
        let pattern6 = /,/;
        let str6 = "apple,orange,banana";
        let fruit = str6.split(pattern6);
        console.log("-- split() --");
        console.log("분해된 배열 : " + fruit[0]);
        console.log("분해된 배열 : " + fruit[1]);

    </script>
</body>

</html>